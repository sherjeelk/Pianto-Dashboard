<app-session-expire></app-session-expire>

<app-loader *ngIf="progress"></app-loader>
<div *ngIf="allUsers && !progress">
  <div class="bg-gradient-danger pb-8 pt-5 pt-md-8">
    <div class="container-fluid">
      <div class="header-body">
        <!-- Card stats -->
        <div class="row">
          <div class="col-xl-3 col-lg-6">
            <div class="card card-stats mb-4 mb-xl-0">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Total Users</h5>
                    <span class="h2 font-weight-bold mb-0">{{allUsers.results.length}}</span>
                  </div>
                  <div class="col-auto">
                    <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                      <i class="fas fa-chart-bar"></i>
                    </div>
                  </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                  <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                  <span class="text-nowrap">Since last month</span>
                </p>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-lg-6">
            <div class="card card-stats mb-4 mb-xl-0">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">New users</h5>
                    <span class="h2 font-weight-bold mb-0">2</span>
                  </div>
                  <div class="col-auto">
                    <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                      <i class="fas fa-chart-pie"></i>
                    </div>
                  </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                  <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>
                  <span class="text-nowrap">Since last week</span>
                </p>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-lg-6">
            <div class="card card-stats mb-4 mb-xl-0">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Sales</h5>
                    <span class="h2 font-weight-bold mb-0">924</span>
                  </div>
                  <div class="col-auto">
                    <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                      <i class="fas fa-users"></i>
                    </div>
                  </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                  <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                  <span class="text-nowrap">Since yesterday</span>
                </p>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-lg-6">
            <div class="card card-stats mb-4 mb-xl-0">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <h5 class="card-title text-uppercase text-muted mb-0">Performance</h5>
                    <span class="h2 font-weight-bold mb-0">49,65%</span>
                  </div>
                  <div class="col-auto">
                    <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                      <i class="fas fa-percent"></i>
                    </div>
                  </div>
                </div>
                <p class="mt-3 mb-0 text-muted text-sm">
                  <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span>
                  <span class="text-nowrap">Since last month</span>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="add-new-button-cont"><button routerLink="/add-user" class="add-new-button" mat-raised-button>Add User</button></div>

  </div>
  <!-- Page content -->
  <div class="container-fluid mt--7"  >
    <!-- Table -->

<!--    <div class="row">-->

<!--      <div class="col">-->
<!--          <div class="card shadow">-->
<!--            <div class="card-header border-0">-->
<!--              <div class="row align-items-center">-->
<!--                <div class="col">-->
<!--                  <h3 class="mb-0">All Users-->

<!--                  </h3>-->
<!--                  </div>-->
<!--                <div class="col text-right">-->
<!--                  <a routerLink="/add-user" class="btn btn-sm btn-primary">Add User</a>-->
<!--                </div>-->

<!--              </div>-->
<!--              </div>-->
<!--            <div class="table-responsive">-->
<!--              <table class="table align-items-center table-flush">-->
<!--                <thead class="thead-light">-->
<!--                <tr>-->
<!--                  <th scope="col">Id</th>-->
<!--                  <th (click)="sortData('name')" scope="col">Name</th>-->
<!--                  <th (click)="sortData('email')" scope="col">Email</th>-->
<!--                  <th (click)="sortData('country')" scope="col">Country</th>-->
<!--                  <th (click)="sortData('status')" scope="col">Status</th>-->
<!--                  <th (click)="sortData('rate')" scope="col">Rate</th>-->
<!--                </tr>-->
<!--                </thead>-->
<!--                <tbody *ngIf="allUsers">-->
<!--                <tr [routerLink]="'/user-details/' + user.id" *ngFor="let user of allUsers.results" style="cursor: pointer">-->
<!--                  <th scope="row">-->
<!--                    <div class="media align-items-center">-->
<!--                      <div class="media-body">-->
<!--                        <span class="mb-0 text-sm">{{user.id}}</span>-->
<!--                      </div>-->
<!--                    </div>-->
<!--                  </th>-->
<!--                  <td scope="row">-->
<!--                    <div class="media align-items-center">-->
<!--                      <div class="media-body">-->
<!--                        <span class="mb-0 text-sm">{{user.name}}</span>-->
<!--                      </div>-->
<!--                    </div>-->
<!--                  </td>-->
<!--                  <td>-->
<!--                    {{user.email}}-->
<!--                  </td>-->
<!--                  <td>-->
<!--                    <div class="avatar-group">-->
<!--                      {{user.country}}-->
<!--                    </div>-->
<!--                  </td>-->
<!--                  <td>-->
<!--                    <div class="d-flex align-items-center">-->
<!--                      <span class="mr-2">{{user.active ? 'Active' : 'Inactive'}}</span>-->

<!--                    </div>-->
<!--                  </td>-->
<!--                  <td class="text-right">-->
<!--                    <div class="d-flex align-items-center">-->
<!--                      <span class="mr-2">{{user.rate}}</span>-->

<!--                    </div>-->

<!--                  </td>-->
<!--                </tr>-->
<!--                </tbody>-->
<!--              </table>-->
<!--            </div>-->
<!--            <div class="card-footer py-4">-->
<!--              <nav aria-label="...">-->
<!--                <ul class="pagination justify-content-end mb-0">-->
<!--                  &lt;!&ndash;                <li *ngIf="totalPage.length > 1" class="page-item disabled">&ndash;&gt;-->
<!--                  &lt;!&ndash;                  <a class="page-link" tabindex="-1">&ndash;&gt;-->
<!--                  &lt;!&ndash;                    <i class="fas fa-angle-left"></i>&ndash;&gt;-->
<!--                  &lt;!&ndash;                    <span class="sr-only">Previous</span>&ndash;&gt;-->
<!--                  &lt;!&ndash;                  </a>&ndash;&gt;-->
<!--                  &lt;!&ndash;                </li>&ndash;&gt;-->
<!--                  <li *ngFor="let page of totalPage; index as i" class="page-item">-->
<!--                    <a class="page-link" (click)="getPageData(i+1)">{{page + 1}}</a>-->
<!--                  </li>-->
<!--                  &lt;!&ndash;                <li *ngIf="totalPage.length > 1" class="page-item">&ndash;&gt;-->
<!--                  &lt;!&ndash;                  <a class="page-link" href="javascript:void(0)">&ndash;&gt;-->
<!--                  &lt;!&ndash;                    <i class="fas fa-angle-right"></i>&ndash;&gt;-->
<!--                  &lt;!&ndash;                    <span class="sr-only">Next</span>&ndash;&gt;-->
<!--                  &lt;!&ndash;                  </a>&ndash;&gt;-->
<!--                  &lt;!&ndash;                </li>&ndash;&gt;-->
<!--                </ul>-->
<!--              </nav>-->
<!--            </div>-->
<!--            </div>-->

<!--        </div>-->
<!--      </div>-->

    <div>
      <div>
        <!--      <mat-form-field class="full-width">-->
        <!--        <mat-label>Filter</mat-label>-->
        <!--        <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>-->
        <!--      </mat-form-field>-->

        <table mat-table [dataSource]="allUsersResults" class="full-width"
               matSort matSortActive="created" matSortDisableClear matSortDirection="desc">
          <!-- Number Column -->
          <ng-container matColumnDef="Id">
            <th mat-header-cell *matHeaderCellDef>Id</th>
            <td   mat-cell *matCellDef="let row">{{row.id}}</td>
          </ng-container>

          <!-- Title Column -->
          <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let row">{{row.name}}</td>
          </ng-container>

          <!-- State Column -->
          <ng-container matColumnDef="Email">
            <th mat-header-cell *matHeaderCellDef>Email</th>
            <td mat-cell *matCellDef="let row">{{row.email}}</td>
          </ng-container>

          <!-- Created Column -->
          <ng-container matColumnDef="Role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
              Role
            </th>
            <td mat-cell *matCellDef="let row">{{row.role}}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns;  sticky: true"></tr>
          <tr [routerLink]="'/user-details/' + row.id" mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>

      <mat-paginator [length]="allUsers.totalResults"
                     [pageSize]="allUsers.limit"
                     (page)="getPageData($event.pageIndex + 1)">
      </mat-paginator>
    </div>


  </div>

  </div>
